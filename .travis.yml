language: php
php:
 - "5.4"
 - "5.3"
before_script: 
 - composer install
 - psql -c 'create database yentu_tests;' -U postgres
 - psql -c 'create database yentu_test_import;' -U postgres
 - psql -f tests/sql/system.sql -U postgres yentu_test_import
 - psql -c 'create database yentu_test_migrate;' -U postgres
 
services:
 - postgresql

script: phpunit --coverage-clover coverage.clover --configuration tests/config/travis.xml tests/cases
after_success: wget https://scrutinizer-ci.com/ocular.phar && php ocular.phar code-coverage:upload --access-token="93e209791d440d1069195255daaa32ce84f96e88ced6d40490b1352dca34f96c" --format=php-clover coverage.clover
